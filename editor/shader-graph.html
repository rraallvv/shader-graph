<link rel="import" href="shader-node.html">
<link rel="import" href="shader-wire.html">

<dom-module id="shader-graph">
	<link rel="import" type="css" href="css/graph.css">

	<template>
		<div id="canvas" class="container-full">
			<template id="template" is="dom-repeat" items="{{links}}">
				<template is="dom-if" if="{{item}}">
					<shader-wire
						pos-a={{item.posA}}
						pos-b={{item.posB}}
						_on-enter={{item.onEnter}}
						_on-out={{item.onOut}}
						_on-drag={{item.onDrag}}
					</shader-wire>
				</template>
			</template>
			<template id="template" is="dom-repeat" items="{{nodes}}">
				<template is="dom-if" if="{{item}}">
					<shader-node
						id$="{{item.id}}"
						key="{{item.key}}"
						type="{{item.type}}"
						instance={{item.instance}}
						class$="{{item.className}}"
						inputs={{item.inputs}}
						outputs={{item.outputs}}
						extra={{item.extra}}
						pos={{item.pos}}
						data-node-id$="{{item.dataNodeId}}"
						remove-node={{item.removeNode}}
						update-data={{item.updateData}}>
					</shader-node>
				</template>
			</template>
		</div>
	</template>

	<script src="js/dependencies/jsplumb.js"></script>
	<script src="../build/shadergraph.js"></script>
	<script src="js/graph.js"></script>
</dom-module>
